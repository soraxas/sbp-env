

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Simulator Engine &mdash; sbp-env 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/katex-math.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/contrib/auto-render.min.js"></script>
        <script src="_static/katex_autorenderer.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Planning Scene Visualisers" href="visualisers.html" />
    <link rel="prev" title="C-space Samplers" href="samplers.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> sbp-env
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="quick-start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Commandline Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="add-environment.html">Adding new environment to test</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Implemented SBPs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="planners.html">Motion Planners</a></li>
<li class="toctree-l1"><a class="reference internal" href="samplers.html">C-space Samplers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Planning environment</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Simulator Engine</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#d-image-space">2D Image Space</a></li>
<li class="toctree-l2"><a class="reference internal" href="#d-robot-arm">4D Robot Arm</a></li>
<li class="toctree-l2"><a class="reference internal" href="#n-d-manipulator"><span class="math">\(n\)</span>-D Manipulator</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="visualisers.html">Planning Scene Visualisers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Others</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="misc.html">Misc Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">sbp-env</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Simulator Engine</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/engines.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="simulator-engine">
<h1>Simulator Engine<a class="headerlink" href="#simulator-engine" title="Permalink to this heading">¶</a></h1>
<p>Currently there are three engines used in <code class="docutils literal notranslate"><span class="pre">sbp-env</span></code> that are used to simulate collisions and the planning environment.</p>
<div class="section" id="d-image-space">
<h2>2D Image Space<a class="headerlink" href="#d-image-space" title="Permalink to this heading">¶</a></h2>
<p>The first one is a <strong>2D</strong> image space engine with the configuration space (<em>C-Space</em>) as <span class="math">\(C \subseteq \mathbb{R}^2\)</span>.
This engine is very easy to use and very easy to add new environments.
This uses the <code class="xref py py-class docutils literal notranslate"><span class="pre">collisionChecker.ImgCollisionChecker</span></code> for environment simulation and with the <code class="xref py py-class docutils literal notranslate"><span class="pre">visualiser.PygameEnvVisualiser</span></code> to visualise the planning scene.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><style type="text/css">
span.prompt1:before {
  content: "$ ";
}
</style><span class="prompt1">python main.py rrdt maps/room1.png</span>
</pre></div></div><div class="sidebar">
<p class="sidebar-title">2D Image simulator</p>
<div class="figure align-default">
<img alt="_images/rrdt.gif" src="_images/rrdt.gif" />
</div>
</div>
<p>This simulator uses images as its <em>C-Space</em> by treating each white pixels as configurations in <span class="math">\(C_\text{free}\)</span>,
and each non-white pixels as configurations in <span class="math">\(C_\text{obs}\)</span>.
The two dimensional space of the <em>C-Space</em></p>
<div class="math">
\[q \equiv [x_0, x_1] \in C \subseteq \mathbb{R}^2

\]</div>
<p>would be taken as the <em>width</em> and the <em>height</em> of the image</p>
<div class="math">
\[0 \le x_0 < \mathcal{I}_\text{Width} \\
0 \le x_1 < \mathcal{I}_\text{Height}

\]</div>
<p>where <span class="math">\(\mathcal{I}\)</span> denotes the image space.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Internally, all pixels with an <strong>RGB value</strong> of <cite>(255, 255, 255)</cite> would be treated as <span class="math">\(q \in C_\text{free}\)</span>,
and any non-white pixels value will be treated as <span class="math">\(q \in C_\text{obs}\)</span> (e.g. <cite>(10, 20, 10)</cite>, <cite>(0, 0, 0)</cite>, etc.).
The alpha channel would not be considered.</p>
</div>
</div>
<div class="section" id="d-robot-arm">
<h2>4D Robot Arm<a class="headerlink" href="#d-robot-arm" title="Permalink to this heading">¶</a></h2>
<p>This simulator internally depends on <code class="xref py py-class docutils literal notranslate"><span class="pre">collisionChecker.ImgCollisionChecker</span></code> to check for collision in the image space.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">python main.py rrt maps/4d.png -s .5 --engine 4d</span>
</pre></div></div><div class="sidebar">
<p class="sidebar-title">4D Robot Arm simulator</p>
<div class="figure align-default">
<img alt="_images/robot-arm4d.gif" src="_images/robot-arm4d.gif" />
</div>
</div>
<p>In contrast to the former, this simulator not only check for point mass collisions,
but performs forward kinematic on the given joints configuration to obtain body
points in world-space <span class="math">\(\mathcal{W}\subseteq \mathbb{R}^2\)</span>.
Since the robot arm contains two configurable joints, the full configuration space <span class="math">\(C\)</span> is given by</p>
<div class="math">
\[q \equiv [x_0, x_1, r_0, r_1] \in C \subseteq \mathbb{R}^4

\]</div>
<p>where</p>
<div class="math">
\[\begin{aligned}
    0      & \le  x_0  <  \mathcal{I}_\text{Width} \\
    0      & \le  x_1  <  \mathcal{I}_\text{Height} \\
    - \pi  & \le  r_0  <  \pi \\
    - \pi  & \le  r_1  <  \pi
\end{aligned}

\]</div>
<p>and we use <span class="math">\(r_0, r_1\)</span> to denote the rotational angles of the first and second joints respectively.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Similar to <code class="xref py py-class docutils literal notranslate"><span class="pre">collisionChecker.ImgCollisionChecker</span></code>, all white pixels will be within <span class="math">\(q \in C_\text{free}\)</span> and vice versa.
The body points obtained by the forward kinematic on <span class="math">\(r_0, r_1\)</span> would be used to check collision in <span class="math">\(\mathcal{W}\)</span> to ensure the entire body is in free space.</p>
</div>
</div>
<div class="section" id="n-d-manipulator">
<h2><span class="math">\(n\)</span>-D Manipulator<a class="headerlink" href="#n-d-manipulator" title="Permalink to this heading">¶</a></h2>
<p>This simulator internally depends on <cite>klampt</cite> package to check for collision in the
the 3D space.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">python main.py rrt klampt_data/tx90blocks.xml --engine klampt</span>
</pre></div></div><div class="sidebar">
<p class="sidebar-title"><span class="math">\(n\)</span>-D Manipulator simulator</p>
<div class="figure align-default">
<img alt="_images/klampt-rrdt.gif" src="_images/klampt-rrdt.gif" />
</div>
</div>
<p>In contrast to the former, this simulator not only check for point mass collisions,
but performs forward kinematic with full body collision on the given joints
configuration to check validity in world-sapce <span class="math">\(\mathcal{W}\subseteq
\mathbb{R}^3\)</span> and <span class="math">\(C \subseteq \mathbb{R}^d\)</span>.
The full configuration space <span class="math">\(C\)</span> is given by</p>
<div class="math">
\[q \equiv [r_0, \ldots, r_{d-1}] \in C \subseteq \mathbb{R}^d

\]</div>
<p>where</p>
<div class="math">
\[\begin{aligned}
    - \pi  & \le  r_i  <  \pi \quad \forall i \in \{0, \ldots, d-1\}
\end{aligned}

\]</div>
<p>and we use <span class="math">\(r_0, r_1\)</span> to denote the rotational angles of the first and second joints respectively.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This simulator is based on the upstream <cite>klampt</cite> and the upstream repository
might update its api without notice. The current implementation is based on
<cite>Klampt==0.8.7</cite></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="visualisers.html" class="btn btn-neutral float-right" title="Planning Scene Visualisers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="samplers.html" class="btn btn-neutral float-left" title="C-space Samplers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Tin Lai.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>